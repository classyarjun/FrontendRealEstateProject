<div class="parent">
  <div class="container">
    <div class="col-md-8">
      <div class="register-container p-4 border rounded shadow col-md-10">

        <i class="bi bi-x-lg text-danger fs-4 position-absolute top-0 end-0 m-3 cursor-pointer"
          (click)="closeFormss()"></i>
        <h2 class="text-center mb-4">User Register</h2>
        <form [formGroup]="registerForm" (ngSubmit)="registerUser()">
          <div class="row mb-3">

            <!-- <div class="col-md-6">
          <label class="form-label">Username:</label>
          <input type="text" class="form-control" formControlName="username" />
          <div *ngIf="registerForm.get('username')?.touched && registerForm.get('username')?.invalid"
            class="text-danger small">
            <small *ngIf="registerForm.get('username')?.errors?.['required']">Username is required.</small>
          </div>
        </div> -->

            <div class="col-md-6">
              <label class="form-label">Username:</label>
              <input type="text" class="form-control" formControlName="username" />
              <div *ngIf="registerForm.get('username')?.touched && registerForm.get('username')?.invalid"
                class="text-danger small">
                <small *ngIf="registerForm.get('username')?.errors?.['required']">Username is required.</small>
                <small *ngIf="registerForm.get('username')?.errors?.['pattern']">Only lowercase letters are
                  allowed.</small>
              </div>
            </div>


            <div class="col-md-6">
              <label class="form-label">Full Name:</label>
              <input type="text" class="form-control" formControlName="fullname" />
              <div *ngIf="registerForm.get('fullname')?.touched && registerForm.get('fullname')?.invalid"
                class="text-danger small">
                <small *ngIf="registerForm.get('fullname')?.errors?.['required']">Full Name is required.</small>
              </div>
            </div>
          </div>

          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label">Email:</label>
              <input type="email" class="form-control" formControlName="email" />
              <div *ngIf="registerForm.get('email')?.touched && registerForm.get('email')?.invalid"
                class="text-danger small">
                <small *ngIf="registerForm.get('email')?.errors?.['required']">Email is required.</small>
                <small *ngIf="registerForm.get('email')?.errors?.['email']">Invalid email format.</small>
              </div>
            </div>
            <div class="col-md-6">
              <label class="form-label">Mobile No:</label>
              <input type="text" class="form-control" formControlName="mobileNo" />
              <div *ngIf="registerForm.get('mobileNo')?.touched && registerForm.get('mobileNo')?.invalid"
                class="text-danger small">
                <small *ngIf="registerForm.get('mobileNo')?.errors?.['required']">Mobile No is required.</small>
                <small *ngIf="registerForm.get('mobileNo')?.errors?.['pattern']">Invalid mobile number.</small>
              </div>
            </div>
          </div>

          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label">Password:</label>
              <div class="input-group">
                <input [type]="showPassword ? 'text' : 'password'" class="form-control" formControlName="password" />
                <button type="button" class="btn btn-outline-secondary" (click)="togglePasswordVisibility('password')">
                  <i class="bi" [ngClass]="showPassword ? 'bi-eye' : 'bi-eye-slash'"></i>
                </button>
              </div>
              <div *ngIf="registerForm.get('password')?.touched && registerForm.get('password')?.invalid"
                class="text-danger small">
                <small *ngIf="registerForm.get('password')?.errors?.['required']">Password is required.</small>
              </div>
            </div>

            <div class="col-md-6">
              <label class="form-label">Confirm Password:</label>
              <div class="input-group">
                <input [type]="showConfirmPassword ? 'text' : 'password'" class="form-control"
                  formControlName="confirmPassword" />
                <button type="button" class="btn btn-outline-secondary"
                  (click)="togglePasswordVisibility('confirmPassword')">
                  <i class="bi" [ngClass]="showConfirmPassword ? 'bi-eye' : 'bi-eye-slash'"></i>
                </button>
              </div>
              <div *ngIf="registerForm.get('confirmPassword')?.touched && registerForm.get('confirmPassword')?.invalid"
                class="text-danger small">
                <small *ngIf="registerForm.get('confirmPassword')?.errors?.['required']">Confirm Password is
                  required.</small>
                <small *ngIf="registerForm.errors?.['passwordMismatch']">Passwords do not match.</small>
              </div>
            </div>
          </div>


          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label">Address:</label>
              <input type="text" class="form-control" formControlName="address" />
              <div *ngIf="registerForm.get('address')?.touched && registerForm.get('address')?.invalid"
                class="text-danger small">
                <small *ngIf="registerForm.get('address')?.errors?.['required']">Address is required.</small>
              </div>
            </div>
            <div class="col-md-6">
              <label class="form-label">Gender:</label>
              <select class="form-control" formControlName="gender">
                <option value="">Select Gender</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
              </select>
              <div *ngIf="registerForm.get('gender')?.touched && registerForm.get('gender')?.invalid"
                class="text-danger small">
                <small *ngIf="registerForm.get('gender')?.errors?.['required']">Gender is required.</small>
              </div>
            </div>
          </div>

          <div class="mb-3">
            <div class="col-md-12">
              <label class="form-label">Profile Picture:</label>
              <input type="file" class="form-control" (change)="onFileSelected($event)" />
              <div *ngIf="fileSizeError" class="text-danger small">
                <small>File size should be less than 2MB.</small>
              </div>
              <div *ngIf="fileFormatError" class="text-danger small">
                <small>Only JPG, JPEG, and PNG files are allowed.</small>
              </div>
            </div>
          </div>

          <div class="form-check mb-3">
            <input type="checkbox" class="form-check-input" formControlName="terms" id="terms" />
            <label class="form-check-label" for="terms">I agree to the Terms & Conditions</label>
            <div *ngIf="registerForm.get('terms')?.touched && registerForm.get('terms')?.invalid"
              class="text-danger small">
              <small>You must agree to the terms.</small>
            </div>
          </div>

          <div class="col-md-12">



            <button type="submit" class="btn btn-primary w-100"
              [disabled]="registerForm.invalid || !selectedFile || loading">
              <span *ngIf="!loading">Register</span>
              <span *ngIf="loading">
                <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
               Registering...
              </span>
            </button>

          </div>

        </form>
      </div>
    </div>
  </div>
</div>
